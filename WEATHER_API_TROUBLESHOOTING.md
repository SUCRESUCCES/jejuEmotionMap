# 날씨 API 문제 해결 가이드

## 1. API 키 확인

### 문제: API 키가 로드되지 않음
**증상**: 콘솔에 `⚠️ 기상청 API 키가 설정되지 않았습니다.` 메시지

**해결 방법**:
1. 프로젝트 루트에 `.env` 파일이 있는지 확인
2. `.env` 파일에 다음 내용이 있는지 확인:
   ```
   VITE_WEATHER_API_KEY=발급받은_API_키
   ```
3. **중요**: `.env` 파일 수정 후 개발 서버를 재시작해야 합니다
4. API 키 앞뒤에 공백이나 따옴표가 없는지 확인

## 2. API 호출 실패

### 문제: CORS 오류
**증상**: 콘솔에 `CORS policy` 또는 `Network error` 메시지

**해결 방법**:
- 개발 환경에서는 Vite 프록시가 자동으로 처리합니다
- `vite.config.ts`의 프록시 설정이 올바른지 확인
- 개발 서버를 재시작하세요

### 문제: API 응답 오류 코드
**증상**: `resultCode`가 '00'이 아님

**일반적인 오류 코드**:
- `01`: 어플리케이션 에러 (API 키 문제 가능)
- `02`: DB 에러
- `03`: NODATA (데이터 없음)
- `04`: HTTP 에러
- `05`: 서비스 연결 실패

**해결 방법**:
- API 키가 올바른지 확인
- 공공데이터포털에서 API 사용 승인이 완료되었는지 확인
- API 서비스가 정상 작동 중인지 확인

## 3. 데이터 파싱 문제

### 문제: 온도 데이터를 찾을 수 없음
**증상**: `⚠️ 온도 데이터(T1H)를 찾을 수 없습니다.` 메시지

**해결 방법**:
- 콘솔에서 `사용 가능한 카테고리`를 확인
- API 응답에 `T1H` 카테고리가 있는지 확인
- `base_time`이 올바른지 확인 (초단기실황은 매시간 30분에 생성)

## 4. base_time 계산 문제

초단기실황 API는 매시간 30분에 데이터가 생성됩니다:
- 현재 시간이 14:25 → 13:30 데이터 요청 (base_time: 1300)
- 현재 시간이 14:35 → 14:30 데이터 요청 (base_time: 1400)
- 현재 시간이 00:25 → 23:30 데이터 요청 (어제, base_time: 2300)

## 5. 디버깅 체크리스트

브라우저 콘솔에서 다음 로그들을 확인하세요:

1. ✅ `🔑 API 키 확인` - 키가 로드되었는지
2. ✅ `🕐 현재 시간 정보` - base_date와 base_time이 올바른지
3. ✅ `🌤️ 기상청 API 호출` - 요청 URL이 올바른지
4. ✅ `📥 API 응답 상태` - HTTP 상태 코드가 200인지
5. ✅ `📦 API 응답 데이터 구조` - 응답 구조가 올바른지
6. ✅ `✅ 온도 데이터 수신` - 온도 값이 정상적으로 파싱되었는지

## 6. 빠른 테스트

브라우저 콘솔에서 다음을 실행하여 API 키가 로드되었는지 확인:

```javascript
console.log('API 키:', import.meta.env.VITE_WEATHER_API_KEY ? '설정됨' : '없음');
```








